<section class="login-clean">
    <form [formGroup]="passwordForm" #form="ngForm" (ngSubmit)="changePassword()">
        <div *ngIf="success && sent" class="alert alert-success">
           Votre mot de passe a bien été changé
        </div>
        <div *ngIf="!success && sent" class="alert alert-danger">
            Erreur : lien invalide ou expiré
        </div>
        <h2 class="text-center">Changer de mot de passe</h2>
        <div class="mb-3">
            <input class="form-control" type="password" name="password" placeholder="Nouveau mot de passe" 
            formControlName="password" [ngClass]="!passwordsMatch && form.pristine ? 'is-invalid' : ''">
            <div *ngIf="!passwordsMatch && form.pristine && form.submitted" class="invalid-feedback">
                Les mots de passe ne correspondent pas
            </div>
        </div>
        <div class="mb-3">
            <input class="form-control" type="password" name="confPassword" placeholder="Confirmer le mot de passe" 
            formControlName="confPassword" [ngClass]="!passwordsMatch && form.pristine ? 'is-invalid' : ''">
            <div *ngIf="!passwordsMatch && form.pristine && form.submitted" class="invalid-feedback">
                Les mots de passe ne correspondent pas
            </div>
        </div>
        <div class="mb-3">
            <button *ngIf="!form.submitted || !success" class="btn btn-primary d-block w-100" 
                type="submit" [disabled]="form.invalid">Valider</button>
        </div>
    </form>
</section>
<app-footer></app-footer>