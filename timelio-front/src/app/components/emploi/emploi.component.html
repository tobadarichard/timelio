<app-header></app-header>
<div *ngIf="hasError" class="row">
    <div class="alert alert-danger col-auto mx-auto mt-2">
        Erreur: emploi du temps introuvable
    </div>
</div>
<div *ngIf="emploi" class="container-fluid">
    <div class="row justify-content-center align-items-center">
        <div class="col-auto">
            <button (click)="previous()" class="btn"><span class="fa fa-arrow-left"></span></button>
        </div>
        <div class="col-auto">
            <mat-label>{{currentSelection}}</mat-label>
            <input hidden matInput [matDatepicker]="picker" (dateChange)="changeDate($event)">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </div>
        <div class="col-auto">
            <button (click)="next()" class="btn"><span class="fa fa-arrow-right"></span></button>
        </div>
        <div class="col-auto text-primary">
            {{emploi.nom}}
        </div>
        <div class="col-auto">
            <ul class="nav nav-pills flex-row">
                <li>
                    <button class="nav-link">
                        Ajouter un evenement
                    </button>
                </li>
                <li>
                    <button class="nav-link">
                        Chercher un evenement
                    </button>
                </li>
                <li>
                    <button class="nav-link" type="button" data-bs-toggle="modal" data-bs-target="#updateEmploiModal">
                        Modifier l'emploi
                    </button>
                </li>
                <li>
                    <button class="nav-link text-danger" type="button" data-bs-toggle="modal"
                        data-bs-target="#confirmationModal">
                        Supprimer l'emploi
                    </button>
                </li>
            </ul>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div *ngFor="let day of days" class="col border">{{day}}</div>
        </div>
        <div *ngFor="let week of calendarPage" class="row">
            <div *ngFor="let dayCell of week" class="col border text-break">
                <h6 [ngClass]="dayCell.date.month() != currentMonth ? 'text-muted' : ''">
                    {{dayCell.date.format('D MMMM')}}
                </h6>
                <ul class="list-unstyled">
                    <li *ngIf="dayCell.evenements.length > 3">
                        <button class="btn badge bg-danger rounded-pill">
                            <span class="d-inline-block text-truncate" style="max-width: 120px;">
                                {{dayCell.evenements.length}} evenements
                            </span>
                        </button>
                    </li>
                    <div *ngIf="dayCell.evenements.length <= 3">
                        <li *ngFor="let event of dayCell.evenements" class="mb-1">
                            <button class="btn badge" [ngStyle]="{'background-color': event.couleur}">
                                <span class="d-inline-block text-truncate" style="max-width: 120px;">
                                    {{event.description}}
                                </span>
                            </button>

                        </li>
                    </div>
                </ul>
            </div>
        </div>
    </div>
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
        <app-delete-emploi-modal [isUserEmploi]="isUserEmploi" [emploi]="emploi"></app-delete-emploi-modal>
    </div>
    <div class="modal fade" id="updateEmploiModal" tabindex="-1" aria-hidden="true">
        <app-update-emploi-modal (updateEmploiEvent)="this.emploi = $event" [isUserEmploi]="isUserEmploi"
            [emploi]="emploi"></app-update-emploi-modal>
    </div>
</div>
<app-footer></app-footer>